Nov 6, 06:59:55 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:55.454Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"3ms","message":"Starting background insights processing","jobId":"insights_1762491402367_dgjfln3jv","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 06:59:55 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:55.867Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"3ms","message":"Starting background insights processing","jobId":"insights_1762491595082_xv4xg1uf3","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 06:59:56 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:56.327Z","level":"INFO","function":"utils/mongodb","requestId":"unknown","elapsed":"881ms","message":"MongoDB connected successfully with optimized pool settings","context":{}}
Nov 6, 06:59:56 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:56.462Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"1008ms","message":"Job status updated","jobId":"insights_1762491402367_dgjfln3jv","status":"processing","matched":1,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 06:59:56 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:56.530Z","level":"DEBUG","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"1076ms","message":"Progress event added","jobId":"insights_1762491402367_dgjfln3jv","eventType":"status","matched":1,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 06:59:56 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:56.530Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"1076ms","message":"Starting AI function calling loop","jobId":"insights_1762491402367_dgjfln3jv","hasSystemId":true,"hasCustomPrompt":true,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 06:59:56 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:56.531Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"1077ms","message":"Attempting to use gemini-2.5-flash (latest stable model)","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 06:59:56 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:56.531Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"1077ms","message":"Model gemini-2.5-flash initialized successfully","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 06:59:56 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:56.535Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"1081ms","message":"Loading initial historical data","systemId":"6ac431c7-fb5d-4714-8b2f-c16e2e9bc8dd","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 06:59:56 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:56.535Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"1081ms","message":"Fetching hourly averaged data","systemId":"6ac431c7-fb5d-4714-8b2f-c16e2e9bc8dd","daysBack":30,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 06:59:56 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:56.535Z","level":"DEBUG","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"1081ms","message":"Date range for query","startDate":"2025-10-08T04:59:56.535Z","endDate":"2025-11-07T04:59:56.535Z","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 06:59:56 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:56.690Z","level":"INFO","function":"utils/mongodb","requestId":"unknown","elapsed":"847ms","message":"MongoDB connected successfully with optimized pool settings","context":{}}
Nov 6, 06:59:56 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:56.827Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"960ms","message":"Job status updated","jobId":"insights_1762491595082_xv4xg1uf3","status":"processing","matched":1,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 06:59:56 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:56.872Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"1418ms","message":"Raw records fetched from database","count":466,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 06:59:56 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:56.873Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"1419ms","message":"Starting hourly aggregation","totalRecords":466,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 06:59:56 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:56.874Z","level":"DEBUG","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"1420ms","message":"Records grouped into hour buckets","bucketCount":69,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 06:59:56 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:56.876Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"1422ms","message":"Hourly aggregation complete","outputHours":69,"inputRecords":466,"compressionRatio":"6.75","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 06:59:56 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:56.876Z","level":"DEBUG","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"1422ms","message":"Formatting hourly data for AI","hours":69,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 06:59:56 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:56.877Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"1423ms","message":"Hourly data formatted for AI","hours":69,"outputSize":20686,"estimatedTokens":5172,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 06:59:56 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:56.877Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"1423ms","message":"Processing iteration 1","jobId":"insights_1762491402367_dgjfln3jv","conversationLength":1,"elapsedTime":"347ms","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 06:59:56 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:56.898Z","level":"DEBUG","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"1031ms","message":"Progress event added","jobId":"insights_1762491595082_xv4xg1uf3","eventType":"status","matched":1,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 06:59:56 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:56.899Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"1032ms","message":"Starting AI function calling loop","jobId":"insights_1762491595082_xv4xg1uf3","hasSystemId":true,"hasCustomPrompt":false,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 06:59:56 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:56.899Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"1032ms","message":"Attempting to use gemini-2.5-flash (latest stable model)","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 06:59:56 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:56.900Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"1033ms","message":"Model gemini-2.5-flash initialized successfully","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 06:59:56 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:56.903Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"1036ms","message":"Loading initial historical data","systemId":"6ac431c7-fb5d-4714-8b2f-c16e2e9bc8dd","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 06:59:56 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:56.904Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"1037ms","message":"Fetching hourly averaged data","systemId":"6ac431c7-fb5d-4714-8b2f-c16e2e9bc8dd","daysBack":30,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 06:59:56 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:56.904Z","level":"DEBUG","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"1037ms","message":"Date range for query","startDate":"2025-10-08T04:59:56.904Z","endDate":"2025-11-07T04:59:56.904Z","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 06:59:56 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T04:59:56.945Z","level":"DEBUG","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"1491ms","message":"Progress event added","jobId":"insights_1762491402367_dgjfln3jv","eventType":"iteration","matched":1,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 06:59:57 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:57.359Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"1492ms","message":"Raw records fetched from database","count":466,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 06:59:57 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:57.360Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"1493ms","message":"Starting hourly aggregation","totalRecords":466,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 06:59:57 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:57.361Z","level":"DEBUG","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"1494ms","message":"Records grouped into hour buckets","bucketCount":69,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 06:59:57 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:57.362Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"1495ms","message":"Hourly aggregation complete","outputHours":69,"inputRecords":466,"compressionRatio":"6.75","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 06:59:57 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:57.363Z","level":"DEBUG","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"1496ms","message":"Formatting hourly data for AI","hours":69,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 06:59:57 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:57.363Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"1496ms","message":"Hourly data formatted for AI","hours":69,"outputSize":20686,"estimatedTokens":5172,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 06:59:57 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:57.363Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"1496ms","message":"Processing iteration 1","jobId":"insights_1762491595082_xv4xg1uf3","conversationLength":1,"elapsedTime":"464ms","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 06:59:57 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T04:59:57.431Z","level":"DEBUG","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"1564ms","message":"Progress event added","jobId":"insights_1762491595082_xv4xg1uf3","eventType":"iteration","matched":1,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 07:00:10 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T05:00:10.517Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"15063ms","message":"AI requested tool call","jobId":"insights_1762491402367_dgjfln3jv","toolName":"request_bms_data","iteration":1,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 07:00:10 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T05:00:10.586Z","level":"DEBUG","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"15132ms","message":"Progress event added","jobId":"insights_1762491402367_dgjfln3jv","eventType":"tool_call","matched":1,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 07:00:10 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T05:00:10.586Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"15132ms","message":"Executing tool call","toolName":"request_bms_data","parameters":{"systemId":"6ac431c7-fb5d-4714-8b2f-c16e2e9bc8dd","metric":"all","time_range_start":"2025-05-06T00:00:00Z","time_range_end":"2025-11-06T23:59:59Z","granularity":"daily_avg"},"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 07:00:10 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T05:00:10.587Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"15133ms","message":"Processing BMS data request","systemId":"6ac431c7-fb5d-4714-8b2f-c16e2e9bc8dd","metric":"all","time_range_start":"2025-05-06T00:00:00Z","time_range_end":"2025-11-06T23:59:59Z","granularity":"daily_avg","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 07:00:10 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T05:00:10.587Z","level":"DEBUG","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"15133ms","message":"Time range parsed","startDate":"2025-05-06T00:00:00.000Z","endDate":"2025-11-06T23:59:59.000Z","daysDiff":184.99998842592592,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 07:00:11 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T05:00:11.264Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"15810ms","message":"Raw records fetched","count":1188,"queryDuration":"677ms","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 07:00:11 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T05:00:11.267Z","level":"DEBUG","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"15813ms","message":"Records grouped into daily buckets","bucketCount":94,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 07:00:11 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T05:00:11.274Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"15820ms","message":"BMS data request completed","systemId":"6ac431c7-fb5d-4714-8b2f-c16e2e9bc8dd","metric":"all","granularity":"daily_avg","outputDataPoints":94,"resultSize":31982,"estimatedTokens":7996,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 07:00:11 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T05:00:11.275Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"15821ms","message":"Tool call completed successfully","toolName":"request_bms_data","duration":"688ms","resultSize":32247,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 07:00:11 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T05:00:11.342Z","level":"DEBUG","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"15888ms","message":"Progress event added","jobId":"insights_1762491402367_dgjfln3jv","eventType":"tool_response","matched":1,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 07:00:11 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T05:00:11.342Z","level":"INFO","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"15888ms","message":"Processing iteration 2","jobId":"insights_1762491402367_dgjfln3jv","conversationLength":3,"elapsedTime":"14812ms","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 07:00:11 PM: aa7688c7 INFO   {"timestamp":"2025-11-07T05:00:11.410Z","level":"DEBUG","function":"generate-insights-background","requestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0","elapsed":"15956ms","message":"Progress event added","jobId":"insights_1762491402367_dgjfln3jv","eventType":"iteration","matched":1,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]8bc767a16df94149aa6ed7c0a1017287","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"aa7688c7-82aa-469f-a274-4bf49fd377d0"}}
Nov 6, 07:00:14 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T05:00:14.722Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"18855ms","message":"AI requested tool call","jobId":"insights_1762491595082_xv4xg1uf3","toolName":"request_bms_data","iteration":1,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 07:00:14 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T05:00:14.812Z","level":"DEBUG","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"18945ms","message":"Progress event added","jobId":"insights_1762491595082_xv4xg1uf3","eventType":"tool_call","matched":1,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 07:00:14 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T05:00:14.812Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"18945ms","message":"Executing tool call","toolName":"request_bms_data","parameters":{"systemId":"6ac431c7-fb5d-4714-8b2f-c16e2e9bc8dd","metric":"capacity","time_range_start":"2025-10-07T13:44:00Z","time_range_end":"2025-11-06T13:44:00Z","granularity":"hourly_avg"},"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 07:00:14 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T05:00:14.813Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"18946ms","message":"Processing BMS data request","systemId":"6ac431c7-fb5d-4714-8b2f-c16e2e9bc8dd","metric":"capacity","time_range_start":"2025-10-07T13:44:00Z","time_range_end":"2025-11-06T13:44:00Z","granularity":"hourly_avg","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 07:00:14 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T05:00:14.813Z","level":"DEBUG","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"18946ms","message":"Time range parsed","startDate":"2025-10-07T13:44:00.000Z","endDate":"2025-11-06T13:44:00.000Z","daysDiff":30,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 07:00:15 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T05:00:15.342Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"19475ms","message":"Raw records fetched","count":533,"queryDuration":"529ms","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 07:00:15 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T05:00:15.342Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"19475ms","message":"Starting hourly aggregation","totalRecords":533,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 07:00:15 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T05:00:15.348Z","level":"DEBUG","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"19481ms","message":"Records grouped into hour buckets","bucketCount":71,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 07:00:15 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T05:00:15.359Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"19492ms","message":"Hourly aggregation complete","outputHours":71,"inputRecords":533,"compressionRatio":"7.51","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 07:00:15 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T05:00:15.359Z","level":"DEBUG","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"19492ms","message":"Data within limit, no sampling needed","hours":71,"maxPoints":200,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 07:00:15 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T05:00:15.360Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"19493ms","message":"BMS data request completed","systemId":"6ac431c7-fb5d-4714-8b2f-c16e2e9bc8dd","metric":"capacity","granularity":"hourly_avg","outputDataPoints":71,"resultSize":5403,"estimatedTokens":1351,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 07:00:15 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T05:00:15.360Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"19493ms","message":"Tool call completed successfully","toolName":"request_bms_data","duration":"548ms","resultSize":5673,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 07:00:15 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T05:00:15.429Z","level":"DEBUG","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"19562ms","message":"Progress event added","jobId":"insights_1762491595082_xv4xg1uf3","eventType":"tool_response","matched":1,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 07:00:15 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T05:00:15.430Z","level":"INFO","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"19563ms","message":"Processing iteration 2","jobId":"insights_1762491595082_xv4xg1uf3","conversationLength":3,"elapsedTime":"18531ms","context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}
Nov 6, 07:00:15 PM: 7a79ed20 INFO   {"timestamp":"2025-11-07T05:00:15.498Z","level":"DEBUG","function":"generate-insights-background","requestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87","elapsed":"19631ms","message":"Progress event added","jobId":"insights_1762491595082_xv4xg1uf3","eventType":"iteration","matched":1,"context":{"callbackWaitsForEmptyEventLoop":true,"functionVersion":"$LATEST","functionName":"a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","memoryLimitInMB":"1024","logGroupName":"/aws/lambda/a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","logStreamName":"2025/11/07/[$LATEST]4cb4ed508ef44eaf8269b3678487e75b","invokedFunctionArn":"arn:aws:lambda:us-east-1:459146367395:function:a9ea84e17330ccba30c92da802b39374cf71579b44bb45d7effb99e9c1af71ff","awsRequestId":"7a79ed20-d939-4dd9-96b0-a750bba50a87"}}