# Visual Feature Summary - Hourly Cloud & Solar Integration

## UI Location

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Historical Analysis Chart                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Controls:                                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ â”‚ System â–¼ â”‚  â”‚ View â–¼   â”‚  â”‚ Start   â”‚  â”‚ End     â”‚          â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚ â”‚ â˜‘ Data Averaging â”‚ â˜‘ Min/Max Bands â”‚ â˜‘ â˜ï¸ Hourly Weather â”‚   â”‚
â”‚ â”‚                  â”‚                 â”‚                  â”‚      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                           â¬†ï¸ NEW TOGGLE          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚     Chart Visualization                                         â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ 100%â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ Cloud Cover (Gray Area) â–‘â–‘â–‘â–‘â”‚         â”‚
â”‚     â”‚                                                â”‚         â”‚
â”‚  75%â”‚     â”Œâ”€â”€â”€â”€â”€â”                                   â”‚         â”‚
â”‚     â”‚    /       \                                  â”‚         â”‚
â”‚  50%â”‚   /    âš¡   \  â† BMS Data (Solid Lines)       â”‚         â”‚
â”‚     â”‚  /            \                               â”‚         â”‚
â”‚  25%â”‚ /   - - - - -  \ â† Irradiance (Dashed Yellow)â”‚         â”‚
â”‚     â”‚/                \                             â”‚         â”‚
â”‚   0%â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚     00:00  06:00  12:00  18:00  00:00                          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Chart Elements

### 1. Cloud Cover Area (Background)
- **Visual**: Gray shaded area from 0% to cloud value
- **Color**: #94a3b8 (slate gray)
- **Opacity**: 0.1 (very subtle, doesn't obscure data)
- **Purpose**: Show when sun was blocked by clouds
- **Data Points**: Hourly intervals (every :00 minute)

### 2. Irradiance Dashed Line
- **Visual**: Dashed yellow line
- **Color**: #fbbf24 (solar yellow)
- **Pattern**: 8px dash, 4px gap
- **Opacity**: 0.8
- **Purpose**: Show solar energy availability (W/mÂ²)
- **Scale**: 0-1200 W/mÂ² typical range

### 3. BMS Data Lines (Primary)
- **Visual**: Solid colored lines
- **Examples**: 
  - Green: State of Charge
  - Blue: Current
  - Yellow: Voltage
- **Opacity**: 1.0 (full)
- **Data Points**: Sporadic (whenever user uploads screenshot)

### 4. Interpolated Points
- **Visual**: Dashed lines between BMS points
- **Opacity**: 0.6 (faded)
- **Purpose**: Estimate battery state between actual readings
- **Color**: Same as parent metric

## Tooltip Display

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nov 24, 2024 14:30:00 UTC         â”‚
â”‚                                    â”‚
â”‚ [â˜ï¸ Hourly Weather]                â”‚
â”‚                                    â”‚
â”‚ â— SOC         85.2 %               â”‚
â”‚ â— Current     12.3 A               â”‚
â”‚ â— Voltage     52.4 V               â”‚
â”‚ â— Clouds      45.0 %               â”‚
â”‚ â— Irradiance  650 W/mÂ²             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

When hovering over different data sources:
- **BMS Screenshot**: [ğŸ“¸ BMS Screenshot] in green
- **Hourly Weather**: [â˜ï¸ Hourly Weather] in blue
- **Interpolated**: [ğŸ”® Interpolated] in purple

## Metric Configuration Panel

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Configure Metrics                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Battery                                  â”‚
â”‚ â˜‘ SOC (Left)     â˜‘ Voltage (Left)       â”‚
â”‚ â˜‘ Current (Right) â˜ Power               â”‚
â”‚                                          â”‚
â”‚ Weather                                  â”‚
â”‚ â˜‘ Clouds (Right)                         â”‚ â† Enable for area
â”‚ â˜‘ Irradiance (Right)                     â”‚ â† Enable for line
â”‚ â˜ Air Temp       â˜ UV Index              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Left Axis: V, %, A                       â”‚
â”‚ Right Axis: %, W/mÂ²                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Visual Legend

**Line Styles**:
- â”â”â”â”â” Solid = BMS actual data
- â”ˆâ”ˆâ”ˆâ”ˆâ”ˆ Dashed = Cloud/Irradiance/Interpolated

**Opacity Levels**:
- 1.0 (Full) = BMS screenshots
- 0.8 (High) = Hourly cloud data / Irradiance
- 0.6 (Medium) = Interpolated estimates
- 0.1 (Low) = Cloud area background

**Color Scheme**:
- ğŸŸ¢ Green: State of Charge, BMS source badge
- ğŸ”µ Blue: Current, Cloud source badge
- ğŸŸ¡ Yellow: Voltage, Irradiance
- ğŸŸ£ Purple: Interpolated source badge
- âš« Gray: Cloud cover area

## Real-World Example Interpretation

```
Time:     00:00   06:00   12:00   18:00   00:00
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
Clouds   â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚  High clouds all day
100%     â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚
         â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚
         â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚
         â”‚                                    â”‚
Irrad.   â”‚    - - - â•±â•² - - -                 â”‚  Low irradiance
600 W/mÂ² â”‚         â•±  â•²                       â”‚  due to clouds
         â”‚        â•±    â•²                      â”‚
         â”‚                                    â”‚
Current  â”‚       â•±â–”â–”â–”â–”â•²                      â”‚  Charging current
20 A     â”‚      â•±      â•²                     â”‚  follows irradiance
         â”‚     â•±        â•²                    â”‚
         â”‚____â•±          â•²____               â”‚
0 A      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Interpretation: 
- Heavy clouds (80-90%) throughout day
- Low solar irradiance (~300-400 W/mÂ²) at peak
- Limited charging current (~10A) due to poor conditions
- This explains low daily charge recovery
```

## Feature Activation Checklist

Before using this feature:
- [ ] System has latitude/longitude configured
- [ ] Hourly cloud data has been backfilled
- [ ] Date range is within available data
- [ ] Enable "Clouds" metric in configuration panel
- [ ] Enable "Irradiance" metric in configuration panel
- [ ] Toggle "â˜ï¸ Hourly Weather" ON
- [ ] Chart will reload with merged data

## Visual Comparison

**Before (BMS Only)**:
```
Battery drops at noon, why?
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
100% â”‚   â•²          â”‚ 
     â”‚    â•²         â”‚
 50% â”‚     â•²______  â”‚ â† Unexplained drop
     â”‚              â”‚
  0% â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**After (With Cloud Data)**:
```
Battery drops at noon - clouds appeared!
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
100% â”‚â–‘â–‘â–‘â–‘â•²â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â”‚ â† Clouds moved in
     â”‚â–‘â–‘â–‘â–‘â–‘â•²â–‘â–‘â–‘â–‘â–‘   â”‚
 50% â”‚â–‘â–‘â–‘â–‘â–‘â–‘â•²______  â”‚ Now explained!
     â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â”‚
  0% â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Result**: Admins can instantly correlate battery behavior with weather conditions!
